(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const t=function t(n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e(this,"_getTemplate",(function(){o._card=document.querySelector(o._template).content.cloneNode(!0)})),e(this,"createCard",(function(){return o._getTemplate(),o._cardImage=o._card.querySelector(".cards__photo"),o._cardImage.src=o._cardlink,o._cardImage.alt=o._cardtitle,o._card.querySelector(".cards__title").textContent=o._cardtitle,o._cardRemove=o._card.querySelector(".cards__delete"),o._likesCounter=o._card.querySelector(".cards__like-counter"),o._cardlike&&o._id?(o._cardlike.length>0&&(o._cardlike.forEach((function(e){e._id===o._userId&&o._card.querySelector(".cards__like").classList.add("cards__like_active")})),o._likesCounter.classList.add("cards__like-counter_visible"),o._likesCounter.textContent=o._cardlike.length),o._id===o._userId&&o._cardRemove.classList.add("cards__delete_visible")):o._cardRemove.classList.add("cards__delete_visible"),o._setListeners(o._likesCounter),o._card})),e(this,"_setListeners",(function(e){o._card.querySelector(".cards__like").addEventListener("click",(function(t){o._handleCardClickLike(t,e)})),o._card.querySelector(".cards__delete").addEventListener("click",o._handleCardClickDelete),o._card.querySelector(".cards__fullphoto").addEventListener("click",(function(){o._handleCardClickImage(o._cardtitle,o._cardlink)}))})),this._cardtitle=n.data.name,this._cardlink=n.data.link,this._cardlike=n.data.like,this._id=n.data.id,this._userId=n.data.userId,this._template=r,this._handleCardClickImage=n.handleCardClickImage,this._handleCardClickDelete=n.handleCardClickDelete,this._handleCardClickLike=n.handleCardClickLike};function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"enableValidation",(function(){o._form.addEventListener("submit",(function(e){e.preventDefault()})),o._setEventListeners()})),n(this,"_setEventListeners",(function(){o._inputList=Array.from(o._form.querySelectorAll(o._inputs)),o._inputList.forEach((function(e){e.addEventListener("input",(function(){o._input=e,o._isValid(),o.toggleButtonState()}))}))})),n(this,"_isValid",(function(){o._input.validity.valid?o._hideError():o._showError(o._input.validationMessage)})),n(this,"toggleButtonState",(function(){o._button=o._form.querySelector(o._submitButton),o._form.checkValidity()?(o._button.classList.remove(o._inactiveButton),o._button.removeAttribute("disabled")):(o._button.classList.add(o._inactiveButton),o._button.setAttribute("disabled","disabled"))})),n(this,"_showError",(function(e){o._span=o._form.querySelector("#".concat(o._input.id,"-error")),o._span.textContent=e,o._input.classList.add(o._inputError)})),n(this,"_hideError",(function(){o._span=o._form.querySelector("#".concat(o._input.id,"-error")),o._span.textContent="",o._input.classList.remove(o._inputError)})),n(this,"hideErrorWithOpen",(function(){o._inputList=Array.from(o._form.querySelectorAll(o._inputs)),o._inputList.forEach((function(e){e.classList.remove("popup__text_type_error"),o._span=document.getElementById(["".concat(e.id,"-error")]),o._span.textContent=""}))})),this._form=r,this._submitButton=t.submitButton,this._inactiveButton=t.inactiveButton,this._inputs=t.inputs,this._inputError=t.inputError};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=function e(t,n){var r=this,i=t.items,c=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"renderCards",(function(){r._items.forEach((function(e){r._card=r._renderer(e)}))})),o(this,"appendItem",(function(e){r._container.append(e)})),o(this,"prependItem",(function(e){r._container.prepend(e)})),this._items=i,this._renderer=c,this._container=document.querySelector(n)};function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const u=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.code&&o.close()},(n="handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popupWindow=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupWindow.classList.add("popup_visible_on"),document.addEventListener("keydown",this.handleEscClose)}},{key:"close",value:function(){this._popupWindow.classList.remove("popup_visible_on"),document.removeEventListener("keydown",this.handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupWindow.addEventListener("click",(function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&c(t.prototype,n),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var o=d(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return l(this,e)});function o(e,t){var n,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),_(f(c=r.call(this,e)),"_getInputValues",(function(){return c._el={},c._inputs=c._form.querySelectorAll("input"),c._inputs.forEach((function(e){c._el[e.name]=e.value})),c._el})),_(f(c),"setEventListeners",(function(){p((n=f(c),d(o.prototype)),"setEventListeners",n).call(n),c._form.addEventListener("submit",(function(){c._submitForm(c._getInputValues())}))})),_(f(c),"close",(function(){p((i=f(c),d(o.prototype)),"close",i).call(i),c._form.reset()})),c._form=c._popupWindow.querySelector(".popup__infosave"),c._submitForm=t,c}return o}(u);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=w(t);if(n){var o=w(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return b(this,e)});function o(e){var t,n,i,c,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),u=function(e,r){k((t=g(n),w(o.prototype)),"open",t).call(t),n._fullImage.src=e,n._fullImage.alt=r,n._fullImageDescription.textContent=r},(c="open")in(i=g(n=r.call(this,e)))?Object.defineProperty(i,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):i.open=u,n._fullImage=n._popupWindow.querySelector(".popup__image"),n._fullImageDescription=n._popupWindow.querySelector(".popup__subtitle"),n}return o}(u);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(n=[{key:"setEventListeners",value:function(){var e=this;C(j(c.prototype),"setEventListeners",this).call(this),this._popupWindow.addEventListener("submit",(function(t){t.preventDefault(),e._submitform()}))}},{key:"submitAction",value:function(e){this._submitform=e}}])&&O(t.prototype,n),c}(u);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t}var t,n;return t=e,(n=[{key:"_checkResStatus",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getProfile",value:function(){var e=this;return fetch("".concat(this._options.baseUrl,"/users/me"),{headers:this._options.headers}).then((function(t){return e._checkResStatus(t)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._options.baseUrl,"/cards"),{headers:this._options.headers}).then((function(t){return e._checkResStatus(t)}))}},{key:"profileUpdate",value:function(e,t){var n=this;return fetch("".concat(this._options.baseUrl,"/users/me"),{method:"PATCH",headers:this._options.headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return n._checkResStatus(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._options.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._options.headers}).then((function(e){return t._checkResStatus(e)}))}},{key:"addCard",value:function(e,t){var n=this;return fetch("".concat(this._options.baseUrl,"/cards"),{method:"POST",headers:this._options.headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return n._checkResStatus(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch("".concat(this._options.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._options.headers}).then((function(e){return t._checkResStatus(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._options.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._options.headers}).then((function(e){return t._checkResStatus(e)}))}},{key:"profileAvatarUpdate",value:function(e){var t=this;return fetch("".concat(this._options.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._options.headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResStatus(e)}))}}])&&q(t.prototype,n),e}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=T(t);if(n){var o=T(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return U(this,e)});function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,e,t)}return o}(h);var D=document.querySelector(".profile__edit"),W=document.querySelector(".profile__add"),V=(document.querySelector("input[name=description]"),document.querySelector("input[name=author]"),document.querySelector(".popup__infosave_type_edit")),N=document.querySelector(".popup__infosave_type_addcard"),J=(document.querySelector(".popup__save_edit"),document.querySelector(".popup__save_add"),document.getElementById("author-error"),document.getElementById("description-error"),document.querySelector(".cards__delete"),document.querySelector(".profile__avatar-link")),F=document.querySelector(".popup__infosave_type_profileUpdate"),H=document.querySelector(".popup__save_edit"),z=document.querySelector(".popup__save_profileUpdate"),M=document.querySelector(".popup__save_add"),G=document.querySelector(".popup__save_deletecard"),K={form:".popup__infosave",submitButton:".popup__save",inactiveButton:"popup__save_disabled",inputs:".popup__text",inputError:"popup__text_type_error"};function Q(e,t){t.textContent=e?t.textContent+"...":t.textContent.replace("...","")}document.querySelector(".cards");var X=function e(t,n){return new i({items:t,renderer:function(t){e().appendItem(ue(t.name,t.link,t.likes,t.owner._id,t._id,n))}},".cards")},Y=new I({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26",headers:{authorization:"254f4d19-4cbe-4ebe-a16e-0232684f7a64","Content-Type":"application/json"}}),Z=new h(".popup_type_addcard",(function(e){Q(!0,M),Y.addCard(e.area,e.imagelink).then((function(t){e=t;var n=t.owner._id;X(e,n).prependItem(ue(e.name,e.link,e.likes,e.owner._id,e._id,n)),Z.close()})).catch((function(e){console.log(e)})).finally((function(){return Q(!1,M)}))}));Y.getProfile().then((function(e){return $.setUserInfo(e.name,e.about),$.setUserAvatar(e.avatar),e._id})).then((function(e){Y.getInitialCards().then((function(t){X(t,e).renderCards()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));var $=new function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"getUserInfo",(function(){return{name:o._userName.textContent,profession:o._userDescription.textContent}})),y(this,"setUserInfo",(function(e,t){e&&(o._userName.textContent=e),t&&(o._userDescription.textContent=t)})),y(this,"setUserAvatar",(function(e){e&&(o._userAvatar.src=e)})),this._userName=document.querySelector(t),this._userDescription=document.querySelector(n),this._userAvatar=document.querySelector(r)}(".profile__title",".profile__subtitle",".profile__avatar"),ee=new S(".popup_type_image"),te=new P(".popup_type_deletecard"),ne=new h(".popup_type_edit",(function(e){Q(!0,H),Y.profileUpdate(e.author,e.description).then((function(){$.setUserInfo(e.author,e.description),ne.close()})).catch((function(e){console.log(e)})).finally((function(){Q(!1,H)}))})),re=new A(".popup_type_profileUpdate",(function(e){Q(!0,z),Y.profileAvatarUpdate(e.avatar).then((function(e){$.setUserAvatar(e.avatar),re.close()})).catch((function(e){console.log(e)})).finally((function(){return Q(!1,z)}))})),oe=new r(K,V),ie=new r(K,N),ce=new r(K,F);function ue(e,n,r,o,i,c){return new t({data:{name:e,link:n,like:r,id:o,userId:c},handleCardClickImage:function(){ee.open(n,e)},handleCardClickLike:function(e,t){var n=new Array;r.forEach((function(e){n.push(e._id)})),r.length>0&&n.includes(c)?Y.deleteLike(i).then((function(n){1===r.length&&t.classList.remove("cards__like-counter_visible"),t.textContent=r.length-1,e.target.classList.remove("cards__like_active"),r=n.likes})).catch((function(e){console.log(e)})):Y.addLike(i).then((function(n){t.classList.add("cards__like-counter_visible"),t.textContent=r.length+1,e.target.classList.add("cards__like_active"),r=n.likes})).catch((function(e){console.log(e)}))},handleCardClickDelete:function(e){var t=e.target.closest(".cards__card");te.open(),te.submitAction((function(){Q(!0,G),e.preventDefault(),Y.deleteCard(i).then((function(){t.remove(),te.close()})).catch((function(e){console.log(e)})).finally((function(){Q(!1,G)}))}))}},"#cards").createCard()}oe.enableValidation(),ie.enableValidation(),ce.enableValidation(),re.setEventListeners(),Z.setEventListeners(),ne.setEventListeners(),ee.setEventListeners(),te.setEventListeners(),D.addEventListener("click",(function(){var e=$.getUserInfo();V.elements.author.value=e.name,V.elements.description.value=e.profession,oe.hideErrorWithOpen(),oe.toggleButtonState(),ne.open()})),J.addEventListener("click",(function(){ce.hideErrorWithOpen(),ce.toggleButtonState(),re.open()})),W.addEventListener("click",(function(){ie.hideErrorWithOpen(),ie.toggleButtonState(),Z.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95YW5kZXgvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3lhbmRleC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8veWFuZGV4Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly95YW5kZXgvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3lhbmRleC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly95YW5kZXgvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8veWFuZGV4Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQXZhdGFyLmpzIiwid2VicGFjazovL3lhbmRleC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8veWFuZGV4Ly4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3lhbmRleC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly95YW5kZXgvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJuYW1lcyI6WyJjYXJkSW5mbyIsImNhcmRTZWxlY3RvciIsIl9jYXJkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX3RlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJfY2FyZGxpbmsiLCJhbHQiLCJfY2FyZHRpdGxlIiwidGV4dENvbnRlbnQiLCJfY2FyZFJlbW92ZSIsIl9saWtlc0NvdW50ZXIiLCJfY2FyZGxpa2UiLCJfaWQiLCJsZW5ndGgiLCJmb3JFYWNoIiwiZWwiLCJfdXNlcklkIiwiY2xhc3NMaXN0IiwiYWRkIiwiX3NldExpc3RlbmVycyIsImxpa2VzQ291bnRlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIl9oYW5kbGVDYXJkQ2xpY2tMaWtlIiwiX2hhbmRsZUNhcmRDbGlja0RlbGV0ZSIsIl9oYW5kbGVDYXJkQ2xpY2tJbWFnZSIsInRoaXMiLCJkYXRhIiwibmFtZSIsImxpbmsiLCJsaWtlIiwiaWQiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2tJbWFnZSIsImhhbmRsZUNhcmRDbGlja0RlbGV0ZSIsImhhbmRsZUNhcmRDbGlja0xpa2UiLCJ2YWxpZENvbmZpZyIsImZvcm0iLCJfZm9ybSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaW5wdXRzIiwiaW5wdXQiLCJfaW5wdXQiLCJfaXNWYWxpZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfYnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImNoZWNrVmFsaWRpdHkiLCJyZW1vdmUiLCJfaW5hY3RpdmVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJlcnJvck1lc3NhZ2UiLCJfc3BhbiIsIl9pbnB1dEVycm9yIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbiIsImlucHV0cyIsImlucHV0RXJyb3IiLCJjb250U2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiaXRlbSIsIl9yZW5kZXJlciIsImNhcmQiLCJfY29udGFpbmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsInBvcHVwU2VsZWN0b3IiLCJjb2RlIiwiY2xvc2UiLCJfcG9wdXBXaW5kb3ciLCJoYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJzdWJtaXRGb3JtIiwiX2VsIiwidmFsdWUiLCJfc3VibWl0Rm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXAiLCJfZnVsbEltYWdlIiwiX2Z1bGxJbWFnZURlc2NyaXB0aW9uIiwiX3N1Ym1pdGZvcm0iLCJhY3Rpb24iLCJvcHRpb25zIiwiX29wdGlvbnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoZW4iLCJfY2hlY2tSZXNTdGF0dXMiLCJkZXNjcmlwdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJjYXJkSWQiLCJhdmF0YXIiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBFZGl0T3BlbiIsInBvcHVwQWRkQ2FyZE9wZW4iLCJmb3JtRWRpdCIsImZvcm1BZGRDYXJkcyIsInBvcHVwUHJvZmlsZVVwZGF0ZU9wZW4iLCJmb3JtV2l0aEF2YXRhciIsInBvcHVwQnV0dG9uU2F2ZUVkaXQiLCJwb3B1cEJ1dHRvblNhdmVQcm9maWxlVXBkYXRlIiwicG9wdXBCdXR0b25TYXZlQWRkIiwicG9wdXBCdXR0b25TYXZlRGVsZXRlIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsInBvcHVwQnV0dG9uIiwicmVwbGFjZSIsInNlY3Rpb24iLCJTZWN0aW9uIiwiYXBwZW5kSXRlbSIsImNyZWF0ZUNhcmQiLCJsaWtlcyIsIm93bmVyIiwiYXBpIiwiQXBpIiwiYXV0aG9yaXphdGlvbiIsInBvcHVwQ2FyZEZvcm0iLCJhZGRDYXJkIiwiYXJlYSIsImltYWdlbGluayIsInByZXBlbmRJdGVtIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImdldFByb2ZpbGUiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImdldEluaXRpYWxDYXJkcyIsInJlbmRlckNhcmRzIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJ1c2VyQXZhdGFyIiwiX3VzZXJOYW1lIiwicHJvZmVzc2lvbiIsIl91c2VyRGVzY3JpcHRpb24iLCJfdXNlckF2YXRhciIsInBvcHVwV2l0aEltYWdlIiwiUG9wdXBXaXRoSW1hZ2UiLCJwb3B1cFdpdGhTdWJtaXQiLCJQb3B1cFdpdGhTdWJtaXQiLCJwb3B1cFByb2ZpbGUiLCJwcm9maWxlVXBkYXRlIiwiYXV0aG9yIiwicG9wdXBVcGRhdGVBdmF0YXIiLCJQb3B1cFdpdGhBdmF0YXIiLCJwcm9maWxlQXZhdGFyVXBkYXRlIiwicHJvZmlsZVZhbGlkYXRpb24iLCJGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0aW9uIiwiYXZhdGFyRm9ybVZhbGlkYXRpb24iLCJDYXJkIiwib3BlbiIsInVzZXJMaWtlcyIsInB1c2giLCJpbmNsdWRlcyIsImRlbGV0ZUxpa2UiLCJhZGRMaWtlIiwiY2xvc2VzdCIsInN1Ym1pdEFjdGlvbiIsImRlbGV0ZUNhcmQiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwiaGlkZUVycm9yV2l0aE9wZW4iXSwibWFwcGluZ3MiOiIySUF1REEsUUF0REksV0FBWUEsRUFBVUMsR0FBYyxZLDRGQUFBLGdDQVlyQixXQUNYLEVBQUtDLE1BQVFDLFNBQ1JDLGNBQWMsRUFBS0MsV0FDbkJDLFFBQ0FDLFdBQVUsTUFoQmlCLHFCQW1CdkIsV0F5QlQsT0F4QkEsRUFBS0MsZUFDTCxFQUFLQyxXQUFhLEVBQUtQLE1BQU1FLGNBQWMsaUJBQzNDLEVBQUtLLFdBQVdDLElBQU0sRUFBS0MsVUFDM0IsRUFBS0YsV0FBV0csSUFBTSxFQUFLQyxXQUMzQixFQUFLWCxNQUFNRSxjQUFjLGlCQUFpQlUsWUFBYyxFQUFLRCxXQUM3RCxFQUFLRSxZQUFjLEVBQUtiLE1BQU1FLGNBQWMsa0JBQzVDLEVBQUtZLGNBQWdCLEVBQUtk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QUFpQixTQUFTLFdBQzdDaUssR0FBcUJlLG9CQUNyQmYsR0FBcUJwSSxvQkFDckI4SCxHQUFrQlEsVUFHdEI1RCxFQUFpQnZHLGlCQUFpQixTQUFTLFdBQ3ZDZ0ssR0FBbUJnQixvQkFDbkJoQixHQUFtQm5JLG9CQUNuQmdHLEVBQWNzQyxXIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGNhcmRJbmZvLCBjYXJkU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9jYXJkdGl0bGUgPSBjYXJkSW5mby5kYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fY2FyZGxpbmsgPSBjYXJkSW5mby5kYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fY2FyZGxpa2UgPSBjYXJkSW5mby5kYXRhLmxpa2U7XHJcbiAgICAgICAgdGhpcy5faWQgPSBjYXJkSW5mby5kYXRhLmlkO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IGNhcmRJbmZvLmRhdGEudXNlcklkO1xyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGlja0ltYWdlID0gY2FyZEluZm8uaGFuZGxlQ2FyZENsaWNrSW1hZ2U7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrRGVsZXRlID0gY2FyZEluZm8uaGFuZGxlQ2FyZENsaWNrRGVsZXRlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGlja0xpa2UgPSBjYXJkSW5mby5oYW5kbGVDYXJkQ2xpY2tMaWtlO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jYXJkID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGUpXHJcbiAgICAgICAgICAgIC5jb250ZW50XHJcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2FyZCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRzX19waG90bycpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9jYXJkbGluaztcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fY2FyZHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRzX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX2NhcmRSZW1vdmUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fZGVsZXRlJyk7XHJcbiAgICAgICAgdGhpcy5fbGlrZXNDb3VudGVyID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpa2UtY291bnRlcicpO1xyXG4gICAgICAgIGlmICgodGhpcy5fY2FyZGxpa2UpICYmICh0aGlzLl9pZCkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhcmRsaWtlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhcmRsaWtlLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fbGlrZScpLmNsYXNzTGlzdC5hZGQoJ2NhcmRzX19saWtlX2FjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlc0NvdW50ZXIuY2xhc3NMaXN0LmFkZCgnY2FyZHNfX2xpa2UtY291bnRlcl92aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkbGlrZS5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhcmRSZW1vdmUuY2xhc3NMaXN0LmFkZCgnY2FyZHNfX2RlbGV0ZV92aXNpYmxlJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRSZW1vdmUuY2xhc3NMaXN0LmFkZCgnY2FyZHNfX2RlbGV0ZV92aXNpYmxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldExpc3RlbmVycyh0aGlzLl9saWtlc0NvdW50ZXIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRMaXN0ZW5lcnMgPSAobGlrZXNDb3VudGVyKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge3RoaXMuX2hhbmRsZUNhcmRDbGlja0xpa2UoZXZlbnQsbGlrZXNDb3VudGVyKX0pO1xyXG4gICAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRzX19kZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcmRDbGlja0RlbGV0ZSk7XHJcbiAgICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2Z1bGxwaG90bycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge3RoaXMuX2hhbmRsZUNhcmRDbGlja0ltYWdlKHRoaXMuX2NhcmR0aXRsZSwgdGhpcy5fY2FyZGxpbmspIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkOyIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IodmFsaWRDb25maWcsIGZvcm0pIHtcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB2YWxpZENvbmZpZy5zdWJtaXRCdXR0b247XHJcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b24gPSB2YWxpZENvbmZpZy5pbmFjdGl2ZUJ1dHRvbjtcclxuICAgICAgICB0aGlzLl9pbnB1dHMgPSB2YWxpZENvbmZpZy5pbnB1dHM7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvciA9IHZhbGlkQ29uZmlnLmlucHV0RXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRzKSk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzVmFsaWQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2lzVmFsaWQgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93RXJyb3IodGhpcy5faW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b24pO1xyXG4gICAgICAgIGlmICghdGhpcy5fZm9ybS5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b24pO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b24pO1xyXG4gICAgICAgICAgICB0aGlzLl9idXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0Vycm9yID0gKGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NwYW4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuX2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIHRoaXMuX3NwYW4udGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5faW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NwYW4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke3RoaXMuX2lucHV0LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIHRoaXMuX3NwYW4udGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICB0aGlzLl9pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVFcnJvcldpdGhPcGVuID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0cykpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX190ZXh0X3R5cGVfZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChbYCR7aW5wdXQuaWR9LWVycm9yYF0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3Bhbi50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyQ2FyZHMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBhcHBlbmRJdGVtID0gKGNhcmQpID0+IHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGNhcmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXBlbmRJdGVtID0gKGNhcmQpID0+IHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkKTtcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uOyIsImNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdwb3B1cF92aXNpYmxlX29uJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX3Zpc2libGVfb24nKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkgfHwgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwOyIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBXaW5kb3cucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbmZvc2F2ZScpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEZvcm0gPSBzdWJtaXRGb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcyA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9lbCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcclxuICAgICAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWw7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0Rm9ybSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSA9ICgpID0+IHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTsiLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Z1bGxJbWFnZSA9IHRoaXMuX3BvcHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9mdWxsSW1hZ2VEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwV2luZG93LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VidGl0bGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuID0gKGxpbmssbmFtZSkgPT4ge1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICB0aGlzLl9mdWxsSW1hZ2Uuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9mdWxsSW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9mdWxsSW1hZ2VEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlOyIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdGZvcm0oKX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRmb3JtID0gYWN0aW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhTdWJtaXQ7IiwiY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNTdGF0dXMocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJvZmlsZSgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc1N0YXR1cyhyZXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNTdGF0dXMocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcm9maWxlVXBkYXRlKG5hbWUsIGRlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc1N0YXR1cyhyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzU3RhdHVzKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgYWRkQ2FyZChuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc1N0YXR1cyhyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzU3RhdHVzKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNTdGF0dXMocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcm9maWxlQXZhdGFyVXBkYXRlKGxpbmspIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5fb3B0aW9ucy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGxpbmtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzU3RhdHVzKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEFwaTsiLCJpbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhBdmF0YXIgZXh0ZW5kcyBQb3B1cFdpdGhGb3JtIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRGb3JtKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoQXZhdGFyOyIsImV4cG9ydCBjb25zdCBwb3B1cEVkaXRPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZE9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ZGVzY3JpcHRpb25dJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPWF1dGhvcl0nKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbmZvc2F2ZV90eXBlX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1BZGRDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5mb3NhdmVfdHlwZV9hZGRjYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBlZGl0UG9wdXBTYXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlX2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBvcHVwU2F2ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZV9hZGQnKTtcclxuZXhwb3J0IGNvbnN0IGF1dGhvckVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dGhvci1lcnJvcicpO1xyXG5leHBvcnQgY29uc3QgZGVzY3JpcHRpb25FcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbi1lcnJvcicpO1xyXG5leHBvcnQgY29uc3QgY2FyZERlbHRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19kZWxldGUnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZVVwZGF0ZU9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWxpbmsnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1XaXRoQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbmZvc2F2ZV90eXBlX3Byb2ZpbGVVcGRhdGUnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQnV0dG9uU2F2ZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmVfZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBCdXR0b25TYXZlUHJvZmlsZVVwZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZV9wcm9maWxlVXBkYXRlJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEJ1dHRvblNhdmVBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmVfYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEJ1dHRvblNhdmVEZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmVfZGVsZXRlY2FyZCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkQ29uZmlnID0ge1xyXG4gICAgZm9ybTogJy5wb3B1cF9faW5mb3NhdmUnLFxyXG4gICAgc3VibWl0QnV0dG9uOiAnLnBvcHVwX19zYXZlJyxcclxuICAgIGluYWN0aXZlQnV0dG9uOiAncG9wdXBfX3NhdmVfZGlzYWJsZWQnLFxyXG4gICAgaW5wdXRzOiAnLnBvcHVwX190ZXh0JyxcclxuICAgIGlucHV0RXJyb3I6ICdwb3B1cF9fdGV4dF90eXBlX2Vycm9yJ1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzVGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMnKTsiLCJleHBvcnQgZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIHBvcHVwQnV0dG9uKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSBwb3B1cEJ1dHRvbi50ZXh0Q29udGVudCArIFwiLi4uXCJcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gcG9wdXBCdXR0b24udGV4dENvbnRlbnQucmVwbGFjZSgnLi4uJywgJycpXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEF2YXRhciBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEF2YXRhci5qcyc7XHJcbmltcG9ydCB7IHBvcHVwRWRpdE9wZW4sIHBvcHVwQWRkQ2FyZE9wZW4sIGZvcm1FZGl0LCBmb3JtQWRkQ2FyZHMsIHZhbGlkQ29uZmlnLCBwb3B1cFByb2ZpbGVVcGRhdGVPcGVuLCBmb3JtV2l0aEF2YXRhciwgcG9wdXBCdXR0b25TYXZlRWRpdCwgcG9wdXBCdXR0b25TYXZlUHJvZmlsZVVwZGF0ZSwgcG9wdXBCdXR0b25TYXZlQWRkLCBwb3B1cEJ1dHRvblNhdmVEZWxldGV9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7cmVuZGVyTG9hZGluZ30gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IChpdGVtcyx1c2VySWQpID0+IG5ldyBTZWN0aW9uKHtcclxuICAgIGl0ZW1zOiBpdGVtcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgIHNlY3Rpb24oKS5hcHBlbmRJdGVtKGNyZWF0ZUNhcmQoaXRlbS5uYW1lLCBpdGVtLmxpbmssIGl0ZW0ubGlrZXMsIGl0ZW0ub3duZXIuX2lkLCBpdGVtLl9pZCwgdXNlcklkKSk7XHJcbiAgICB9XHJcbn0sICcuY2FyZHMnKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjYnLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246ICcyNTRmNGQxOS00Y2JlLTRlYmUtYTE2ZS0wMjMyNjg0ZjdhNjQnLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCBwb3B1cENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2FkZGNhcmQnLCAoaXRlbSkgPT4ge1xyXG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBwb3B1cEJ1dHRvblNhdmVBZGQpO1xyXG4gICAgYXBpLmFkZENhcmQoaXRlbS5hcmVhLCBpdGVtLmltYWdlbGluaykudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICAgIGl0ZW0gPSBjYXJkO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IGNhcmQub3duZXIuX2lkO1xyXG4gICAgICAgIHNlY3Rpb24oaXRlbSx1c2VySWQpLnByZXBlbmRJdGVtKGNyZWF0ZUNhcmQoaXRlbS5uYW1lLCBpdGVtLmxpbmssIGl0ZW0ubGlrZXMsIGl0ZW0ub3duZXIuX2lkLCBpdGVtLl9pZCwgdXNlcklkKSk7XHJcbiAgICAgICAgcG9wdXBDYXJkRm9ybS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkaW5nKGZhbHNlLCBwb3B1cEJ1dHRvblNhdmVBZGQpKTtcclxufSk7XHJcblxyXG5hcGkuZ2V0UHJvZmlsZSgpLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgY29uc3QgdXNlcklkID0gcmVzLl9pZDtcclxuICAgIHJldHVybiB1c2VySWQ7XHJcbn0pXHJcbi50aGVuKCh1c2VySWQpID0+IHtcclxuICAgIGFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChpdGVtcykgPT4ge1xyXG4gICAgICAgIHNlY3Rpb24oaXRlbXMsdXNlcklkKS5yZW5kZXJDYXJkcygpO1xyXG4gICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxufSlcclxuLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbn0pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oJy5wcm9maWxlX190aXRsZScsICcucHJvZmlsZV9fc3VidGl0bGUnLCAnLnByb2ZpbGVfX2F2YXRhcicpO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX2ltYWdlJyk7XHJcbmNvbnN0IHBvcHVwV2l0aFN1Ym1pdCA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoJy5wb3B1cF90eXBlX2RlbGV0ZWNhcmQnKTtcclxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2VkaXQnLCAoaXRlbSkgPT4ge1xyXG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBwb3B1cEJ1dHRvblNhdmVFZGl0KTtcclxuICAgIGFwaS5wcm9maWxlVXBkYXRlKGl0ZW0uYXV0aG9yLCBpdGVtLmRlc2NyaXB0aW9uKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oaXRlbS5hdXRob3IsIGl0ZW0uZGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBwb3B1cFByb2ZpbGUuY2xvc2UoKX0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcG9wdXBCdXR0b25TYXZlRWRpdClcclxuICAgICAgICB9KVxyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEF2YXRhcignLnBvcHVwX3R5cGVfcHJvZmlsZVVwZGF0ZScsIChpdGVtKSA9PiB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwQnV0dG9uU2F2ZVByb2ZpbGVVcGRhdGUpO1xyXG4gICAgYXBpLnByb2ZpbGVBdmF0YXJVcGRhdGUoaXRlbS5hdmF0YXIpLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcilcclxuICAgICAgICBwb3B1cFVwZGF0ZUF2YXRhci5jbG9zZSgpfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkaW5nKGZhbHNlLCBwb3B1cEJ1dHRvblNhdmVQcm9maWxlVXBkYXRlKSlcclxufSk7XHJcblxyXG5jb25zdCBwcm9maWxlVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkQ29uZmlnLCBmb3JtRWRpdCk7XHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkQ29uZmlnLCBmb3JtQWRkQ2FyZHMpO1xyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkQ29uZmlnLCBmb3JtV2l0aEF2YXRhcik7XHJcblxyXG5wcm9maWxlVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNhcmRGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbnBvcHVwVXBkYXRlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aFN1Ym1pdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChuYW1lLCBsaW5rLCBsaWtlLCBpZCwgY2FyZElkLCB1c2VySWQpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgICAgZGF0YTogeyBuYW1lLCBsaW5rLCBsaWtlLCBpZCwgdXNlcklkIH0sXHJcbiAgICAgICAgaGFuZGxlQ2FyZENsaWNrSW1hZ2U6ICgpID0+IHsgcG9wdXBXaXRoSW1hZ2Uub3BlbihsaW5rLCBuYW1lKSB9LFxyXG4gICAgICAgIGhhbmRsZUNhcmRDbGlja0xpa2U6IChldmVudCwgbGlrZXNDb3VudGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJMaWtlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICBsaWtlLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyTGlrZXMucHVzaChlbC5faWQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZiAobGlrZS5sZW5ndGggPiAwICYmIHVzZXJMaWtlcy5pbmNsdWRlcyh1c2VySWQpKSB7XHJcbiAgICAgICAgICAgICAgICBhcGkuZGVsZXRlTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWtlLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlrZXNDb3VudGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRzX19saWtlLWNvdW50ZXJfdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IGxpa2UubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRzX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWtlID0gZGF0YS5saWtlc1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFwaS5hZGRMaWtlKGNhcmRJZCkudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsaWtlc0NvdW50ZXIuY2xhc3NMaXN0LmFkZCgnY2FyZHNfX2xpa2UtY291bnRlcl92aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gbGlrZS5sZW5ndGggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdjYXJkc19fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBsaWtlID0gZGF0YS5saWtlc1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2tEZWxldGU6IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5jYXJkc19fY2FyZCcpO1xyXG4gICAgICAgICAgICBwb3B1cFdpdGhTdWJtaXQub3BlbigpO1xyXG4gICAgICAgICAgICBwb3B1cFdpdGhTdWJtaXQuc3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgcG9wdXBCdXR0b25TYXZlRGVsZXRlKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FyZC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3B1cFdpdGhTdWJtaXQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIHBvcHVwQnV0dG9uU2F2ZURlbGV0ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9LCAnI2NhcmRzJykuY3JlYXRlQ2FyZCgpO1xyXG4gICAgcmV0dXJuIGNhcmQ7XHJcbn1cclxuXHJcbnBvcHVwRWRpdE9wZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICBmb3JtRWRpdC5lbGVtZW50c1snYXV0aG9yJ10udmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gICAgZm9ybUVkaXQuZWxlbWVudHNbJ2Rlc2NyaXB0aW9uJ10udmFsdWUgPSB1c2VyRGF0YS5wcm9mZXNzaW9uO1xyXG4gICAgcHJvZmlsZVZhbGlkYXRpb24uaGlkZUVycm9yV2l0aE9wZW4oKTtcclxuICAgIHByb2ZpbGVWYWxpZGF0aW9uLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICBwb3B1cFByb2ZpbGUub3BlbigpO1xyXG59KTtcclxuXHJcbnBvcHVwUHJvZmlsZVVwZGF0ZU9wZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBhdmF0YXJGb3JtVmFsaWRhdGlvbi5oaWRlRXJyb3JXaXRoT3BlbigpO1xyXG4gICAgYXZhdGFyRm9ybVZhbGlkYXRpb24udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHBvcHVwVXBkYXRlQXZhdGFyLm9wZW4oKTtcclxufSk7XHJcblxyXG5wb3B1cEFkZENhcmRPcGVuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY2FyZEZvcm1WYWxpZGF0aW9uLmhpZGVFcnJvcldpdGhPcGVuKCk7XHJcbiAgICBjYXJkRm9ybVZhbGlkYXRpb24udG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHBvcHVwQ2FyZEZvcm0ub3BlbigpO1xyXG59KTsiLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckRlc2NyaXB0aW9uLCB1c2VyQXZhdGFyKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcclxuICAgICAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8gPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIHByb2Zlc3Npb246IHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8gPSAobmFtZSxwcm9mZXNzaW9uKSA9PiB7XHJcbiAgICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJvZmVzc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBwcm9mZXNzaW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyQXZhdGFyID0gKHVzZXJBdmF0YXIpID0+IHtcclxuICAgICAgICBpZiAodXNlckF2YXRhcikge1xyXG4gICAgICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IHVzZXJBdmF0YXI7XHJcbiAgICAgICAgfSAgXHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87Il0sInNvdXJjZVJvb3QiOiIifQ==